---
title: "R Notebook"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Here I will be annotating my process for creating my shiny app. The app will be capable of generating maps (ideally cloropleths) for the Amazon/Brazil Forest fire data.

I was initially going to download geojson for Brazil's provinces, but soon after found that the makers of ggplot also created ggmap. ggmap allows fairly easy mapping without the need to download geographic data directly. I might change using this down the road since I wouldn't want to publish my API key or get charged if someone were to make a large amount of requests to my account. 

After a bit of searching, I've discovered the CRAN package "brazilmaps", however this is not a widely used package and uses S4 objects, which I am not yet familiar with. That's the next thing to learn about so that I can actually make the cloropleth which is by far the graph most foreign to me. The rest I've implemented before at work and will work on once I have more time. 

Recently I've been busy with fencing (training and tournaments), working on my resume and other personal (non-coding) projects. My work term report for this coop term is also on my mind.

Now that I've gotten a handle on the format of brazil maps and can map by state:
```{r}
library(brazilmaps)
map_states <- get_brmap(geo = "State", class = "sf")
plot_brmap(map_states)
```
I need to determine how to overlap this data with the Kaggle data. Looking at map_states' names, I found "nome" (name in Portuguese) and "state" from the Kaggle data overlap. Great, and they can be joined fairly easily with the plot_brmap function, given some extra parameters.

```{r}
library(brazilmaps)
BR_fire_data <- read.csv('../amazon.csv')
map_states <- get_brmap(geo = "State", class = "sf")
plot_brmap(map_states,
           data_to_join = BR_fire_data,
           join_by = c('nome'='state'),
           var = 'Forest Fires 2018')
```

While this does show a cloropleth map, it doesn't show as many provinces as we might have expected. Maybe there's a discresion in the names - let's check.
With setdiff(levels(map_states$nome),levels(BR_fire_data$state)), we see that some of the provinces have accents and that one of the datasets is all in caps.
Even after we change this, we see the Kaggle data says Rio instead of brazilmaps' "RIO DE JANEIRO", "RIO GRANDE DO NORTE" and "RIO GRANDE DO SUL".

setdiff(levels(map_states$nome),levels(BR_fire_data$state))



I will be creating a list of my dependencies in a R file seperate from app.R so be sure to have all the necessary packages if you'd like to try out my app.




Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Ctrl+Alt+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Ctrl+Shift+K* to preview the HTML file).

The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.
